<!DOCTYPE html>
<html>
<head><meta charset="utf-8"></head>
<body>
<script>
  const params = new URLSearchParams(window.location.search);
  const code = params.get('code');
  const scope = params.get('scope');
  const state = params.get('state');

  if (code) {
    // Build redirect with everything Strava gave us
    let redirect = `lfthvy://callback?code=${code}`;
    if (scope) redirect += `&scope=${encodeURIComponent(scope)}`;
    if (state) redirect += `&state=${encodeURIComponent(state)}`;
    
    window.location = redirect;
  } else {
    document.body.textContent = "‚ùå Error: No `code` parameter in URL.";
  }
</script>
</body>
</html>
